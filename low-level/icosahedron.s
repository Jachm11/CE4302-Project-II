# ##################CUSTOM INSTRUCTIONS###############

# Vector registers
#   128 bits long (32x4)
#   v0 = [0,0,0,0] 
#   v1 -> v31

# Vector instructions
#
#     |       Name       |      Syntax      |        Description 
#     |__________________|__________________|__________________________
#     | Vector sum       | vadd vd v1 v2    | vd = v1 + v2
#     | Vector sum       | vsub vd v1 v2    | vd = v1 - v2
#     | Scalar to vector | stv vd vs rs imm | vd[imm] = rs (when vs=vd)
#     | Vector to scalar | vts sd vs imm    | sd = vs[imm]
#     | Vector store     | vs v imm(sr)     | M[sr+imm][0:128] = v
#     | Vector load      | vl v imm(sr)     | v = M[sr+imm][0:128]
#     | Vector abs       | vabs vd vs       | vd = abs(vs)

######################################################

li a0 232
li a1 154
li a2 398
li a3 154
li a4 8
jal ra, draw_line
li a0 398
li a1 154
li a2 388
li a3 168
li a4 8
jal ra, draw_line
li a0 388
li a1 168
li a2 246
li a3 169
li a4 8
jal ra, draw_line
li a0 246
li a1 169
li a2 233
li a3 154
li a4 8
jal ra, draw_line
li a0 233
li a1 155
li a2 318
li a3 318
li a4 11
jal ra, draw_line
li a0 318
li a1 318
li a2 318
li a3 302
li a4 11
jal ra, draw_line
li a0 318
li a1 302
li a2 246
li a3 170
li a4 11
jal ra, draw_line
li a0 236
li a1 177
li a2 307
li a3 313
li a4 11
jal ra, draw_line
li a0 307
li a1 313
li a2 318
li a3 318
li a4 11
jal ra, draw_line
li a0 235
li a1 178
li a2 233
li a3 154
li a4 11
jal ra, draw_line
li a0 234
li a1 164
li a2 195
li a3 310
li a4 14
jal ra, draw_line
li a0 193
li a1 307
li a2 232
li a3 156
li a4 14
jal ra, draw_line
li a0 235
li a1 178
li a2 205
li a3 304
li a4 14
jal ra, draw_line
li a0 205
li a1 304
li a2 196
li a3 310
li a4 14
jal ra, draw_line
li a0 193
li a1 307
li a2 191
li a3 315
li a4 14
jal ra, draw_line
li a0 196
li a1 311
li a2 318
li a3 320
li a4 8
jal ra, draw_line
li a0 205
li a1 305
li a2 307
li a3 312
li a4 8
jal ra, draw_line
li a0 195
li a1 311
li a2 192
li a3 315
li a4 8
jal ra, draw_line
li a0 318
li a1 320
li a2 309
li a3 330
li a4 8
jal ra, draw_line
li a0 309
li a1 330
li a2 193
li a3 316
li a4 8
jal ra, draw_line
li a0 319
li a1 302
li a2 388
li a3 168
li a4 14
jal ra, draw_line
li a0 399
li a1 154
li a2 319
li a3 317
li a4 14
jal ra, draw_line
li a0 399
li a1 171
li a2 330
li a3 311
li a4 14
jal ra, draw_line
li a0 319
li a1 318
li a2 330
li a3 311
li a4 14
jal ra, draw_line
li a0 400
li a1 155
li a2 444
li a3 311
li a4 11
jal ra, draw_line
li a0 444
li a1 312
li a2 435
li a3 302
li a4 11
jal ra, draw_line
li a0 435
li a1 302
li a2 400
li a3 171
li a4 11
jal ra, draw_line
li a0 400
li a1 155
li a2 399
li a3 172
li a4 11
jal ra, draw_line
li a0 443
li a1 302
li a2 445
li a3 312
li a4 11
jal ra, draw_line
li a0 443
li a1 302
li a2 407
li a3 167
li a4 11
jal ra, draw_line
li a0 407
li a1 166
li a2 400
li a3 154
li a4 11
jal ra, draw_line
li a0 401
li a1 154
li a2 446
li a3 166
li a4 8
jal ra, draw_line
li a0 409
li a1 167
li a2 442
li a3 175
li a4 8
jal ra, draw_line
li a0 442
li a1 175
li a2 445
li a3 167
li a4 8
jal ra, draw_line
li a0 446
li a1 167
li a2 447
li a3 310
li a4 14
jal ra, draw_line
li a0 444
li a1 172
li a2 444
li a3 302
li a4 14
jal ra, draw_line
li a0 441
li a1 290
li a2 442
li a3 177
li a4 14
jal ra, draw_line
li a0 318
li a1 320
li a2 444
li a3 312
li a4 8
jal ra, draw_line
li a0 319
li a1 320
li a2 328
li a3 328
li a4 8
jal ra, draw_line
li a0 329
li a1 329
li a2 434
li a3 317
li a4 8
jal ra, draw_line
li a0 434
li a1 317
li a2 444
li a3 312
li a4 8
jal ra, draw_line
li a0 331
li a1 313
li a2 435
li a3 304
li a4 8
jal ra, draw_line
li a0 319
li a1 321
li a2 320
li a3 415
li a4 14
jal ra, draw_line
li a0 310
li a1 331
li a2 312
li a3 404
li a4 14
jal ra, draw_line
li a0 312
li a1 406
li a2 319
li a3 416
li a4 14
jal ra, draw_line
li a0 319
li a1 416
li a2 326
li a3 404
li a4 14
jal ra, draw_line
li a0 326
li a1 404
li a2 328
li a3 329
li a4 14
jal ra, draw_line
li a0 196
li a1 176
li a2 190
li a3 168
li a4 11
jal ra, draw_line
li a0 190
li a1 168
li a2 191
li a3 314
li a4 11
jal ra, draw_line
li a0 197
li a1 286
li a2 197
li a3 176
li a4 11
jal ra, draw_line
li a0 312
li a1 398
li a2 261
li a3 325
li a4 11
jal ra, draw_line
li a0 249
li a1 324
li a2 311
li a3 405
li a4 11
jal ra, draw_line
li a0 303
li a1 399
li a2 203
li a3 318
li a4 8
jal ra, draw_line
li a0 192
li a1 316
li a2 319
li a3 417
li a4 8
jal ra, draw_line
li a0 327
li a1 400
li a2 378
li a3 325
li a4 14
jal ra, draw_line
li a0 390
li a1 322
li a2 335
li a3 399
li a4 14
jal ra, draw_line
li a0 335
li a1 400
li a2 329
li a3 403
li a4 14
jal ra, draw_line
li a0 335
li a1 400
li a2 434
li a3 317
li a4 8
jal ra, draw_line
li a0 446
li a1 313
li a2 321
li a3 417
li a4 8
jal ra, draw_line
li a0 303
li a1 400
li a2 310
li a3 405
li a4 8
jal ra, draw_line
li a0 197
li a1 177
li a2 228
li a3 170
li a4 8
jal ra, draw_line
li a0 232
li a1 154
li a2 191
li a3 168
li a4 8
jal ra, draw_line
li a0 441
li a1 186
li a2 425
li a3 231
li a4 8
jal ra, draw_line
li a0 422
li a1 219
li a2 436
li a3 177
li a4 8
jal ra, draw_line
li a0 416
li a1 237
li a2 395
li a3 296
li a4 8
jal ra, draw_line
li a0 400
li a1 304
li a2 420
li a3 249
li a4 8
jal ra, draw_line
li a0 395
li a1 296
li a2 399
li a3 302
li a4 8
jal ra, draw_line
li a0 395
li a1 296
li a2 366
li a3 243
li a4 11
jal ra, draw_line
li a0 361
li a1 251
li a2 391
li a3 303
li a4 11
jal ra, draw_line
li a0 384
li a1 304
li a2 358
li a3 257
li a4 11
jal ra, draw_line
li a0 319
li a1 172
li a2 353
li a3 235
li a4 11
jal ra, draw_line
li a0 357
li a1 226
li a2 327
li a3 171
li a4 11
jal ra, draw_line
li a0 318
li a1 184
li a2 349
li a3 241
li a4 11
jal ra, draw_line
li a0 318
li a1 185
li a2 318
li a3 173
li a4 11
jal ra, draw_line
li a0 318
li a1 173
li a2 327
li a3 171
li a4 11
jal ra, draw_line
li a0 308
li a1 177
li a2 281
li a3 226
li a4 11
jal ra, draw_line
li a0 288
li a1 242
li a2 317
li a3 185
li a4 11
jal ra, draw_line
li a0 308
li a1 176
li a2 317
li a3 177
li a4 14
jal ra, draw_line
li a0 271
li a1 247
li a2 248
li a3 289
li a4 14
jal ra, draw_line
li a0 248
li a1 289
li a2 250
li a3 302
li a4 14
jal ra, draw_line
li a0 257
li a1 303
li a2 279
li a3 261
li a4 14
jal ra, draw_line
li a0 257
li a1 303
li a2 250
li a3 302
li a4 14
jal ra, draw_line 
li a0 308
li a1 177
li a2 254
li a3 177
li a4 11
jal ra, draw_line
li a0 254
li a1 177
li a2 247
li a3 170
li a4 11
jal ra, draw_line
li a0 330
li a1 176
li a2 383
li a3 176
li a4 11
jal ra, draw_line
li a0 383
li a1 176
li a2 387
li a3 169
li a4 11
jal ra, draw_line
li a0 248
li a1 302
li a2 222
li a3 239
li a4 8
jal ra, draw_line
li a0 248
li a1 288
li a2 224
li a3 230
li a4 8
jal ra, draw_line
li a0 220
li a1 245
li a2 243
li a3 303
li a4 8
jal ra, draw_line
li a0 243
li a1 304
li a2 248
li a3 301
li a4 8
jal ra, draw_line
li a0 198
li a1 178
li a2 215
li a3 219
li a4 8
jal ra, draw_line
li a0 217
li a1 212
li a2 203
li a3 178
li a4 8
jal ra, draw_line
li a0 197
li a1 189
li a2 213
li a3 228
li a4 8
jal ra, draw_line
li a0 275
li a1 254
li a2 257
li a3 290
li a4 14
jal ra, draw_line
li a0 285
li a1 238
li a2 315
li a3 178
li a4 14
jal ra, draw_line
li a0 203
li a1 176
li a2 226
li a3 177
li a4 14
jal ra, draw_line
li a0 397
li a1 176
li a2 401
li a3 176
li a4 14
jal ra, draw_line
li a0 410
li a1 176
li a2 435
li a3 176
li a4 14
jal ra, draw_line
li a0 385
li a1 324
li a2 329
li a3 402
li a4 14
jal ra, draw_line
li a0 255
li a1 324
li a2 309
li a3 400
li a4 11
jal ra, draw_line
li a0 383
li a1 304
li a2 391
li a3 304
li a4 11
jal ra, draw_line
li a0 392
li a1 304
li a2 395
li a3 297
li a4 11
jal ra, draw_line
li a0 205
li a1 304
li a2 242
li a3 304
li a4 11
jal ra, draw_line
li a0 257
li a1 304
li a2 301
li a3 305
li a4 11
jal ra, draw_line
li a0 334
li a1 305
li a2 383
li a3 305
li a4 14
jal ra, draw_line
li a0 401
li a1 304
li a2 434
li a3 302
li a4 14
jal ra, draw_line
li a0 398
li a1 300
li a2 418
li a3 243
li a4 8
jal ra, draw_line
li a0 423
li a1 226
li a2 441
li a3 177
li a4 8
jal ra, draw_line
li a0 313
li a1 76
li a2 313
li a3 153
li a4 8
jal ra, draw_line
li a0 324
li a1 153
li a2 324
li a3 82
li a4 8
jal ra, draw_line
li a0 399
li a1 154
li a2 317
li a3 66
li a4 14
jal ra, draw_line
li a0 317
li a1 61
li a2 317
li a3 66
li a4 14
jal ra, draw_line
li a0 317
li a1 61
li a2 400
li a3 152
li a4 14
jal ra, draw_line
li a0 399
li a1 155
li a2 400
li a3 153
li a4 14
jal ra, draw_line
li a0 386
li a1 152
li a2 317
li a3 72
li a4 14
jal ra, draw_line
li a0 317
li a1 66
li a2 317
li a3 73
li a4 14
jal ra, draw_line
li a0 317
li a1 60
li a2 446
li a3 166
li a4 11
jal ra, draw_line
li a0 434
li a1 163
li a2 338
li a3 83
li a4 11
jal ra, draw_line
li a0 316
li a1 61
li a2 191
li a3 167
li a4 14
jal ra, draw_line
li a0 201
li a1 164
li a2 290
li a3 88
li a4 14
jal ra, draw_line
li a0 317
li a1 61
li a2 232
li a3 153
li a4 11
jal ra, draw_line
li a0 316
li a1 72
li a2 246
li a3 152
li a4 11
jal ra, draw_line
li a0 316
li a1 64
li a2 239
li a3 152
li a4 11
jal ra, draw_line
li a0 236
li a1 158
li a2 395
li a3 158
li a4 9
jal ra, draw_line
li a0 239
li a1 162
li a2 392
li a3 163
li a4 9
jal ra, draw_line
li a0 244
li a1 167
li a2 389
li a3 166
li a4 9
jal ra, draw_line
li a0 319
li a1 314
li a2 239
li a3 163
li a4 11
jal ra, draw_line
li a0 319
li a1 307
li a2 245
li a3 170
li a4 11
jal ra, draw_line
li a0 234
li a1 160
li a2 315
li a3 317
li a4 12
jal ra, draw_line
li a0 234
li a1 165
li a2 311
li a3 314
li a4 12
jal ra, draw_line
li a0 235
li a1 174
li a2 308
li a3 312
li a4 12
jal ra, draw_line
li a0 234
li a1 158
li a2 193
li a3 314
li a4 15
jal ra, draw_line
li a0 233
li a1 158
li a2 193
li a3 313
li a4 15
jal ra, draw_line
li a0 235
li a1 170
li a2 199
li a3 308
li a4 14
jal ra, draw_line
li a0 203
li a1 306
li a2 235
li a3 175
li a4 14
jal ra, draw_line
li a0 234
li a1 168
li a2 198
li a3 309
li a4 14
jal ra, draw_line
li a0 193
li a1 171
li a2 232
li a3 158
li a4 9
jal ra, draw_line
li a0 195
li a1 174
li a2 230
li a3 164
li a4 9
jal ra, draw_line
li a0 197
li a1 177
li a2 229
li a3 168
li a4 9
jal ra, draw_line
li a0 193
li a1 172
li a2 193
li a3 307
li a4 11
jal ra, draw_line
li a0 195
li a1 175
li a2 196
li a3 293
li a4 11
jal ra, draw_line
li a0 234
li a1 154
li a2 315
li a3 64
li a4 12
jal ra, draw_line
li a0 238
li a1 154
li a2 315
li a3 65
li a4 12
jal ra, draw_line
li a0 242
li a1 153
li a2 316
li a3 67
li a4 11
jal ra, draw_line
li a0 317
li a1 70
li a2 245
li a3 154
li a4 11
jal ra, draw_line
li a0 317
li a1 70
li a2 244
li a3 153
li a4 11
jal ra, draw_line
li a0 315
li a1 154
li a2 315
li a3 75
li a4 10
jal ra, draw_line
li a0 317
li a1 74
li a2 318
li a3 154
li a4 10
jal ra, draw_line
li a0 320
li a1 77
li a2 320
li a3 154
li a4 10
jal ra, draw_line
li a0 323
li a1 80
li a2 323
li a3 154
li a4 10
jal ra, draw_line
li a0 199
li a1 178
li a2 216
li a3 217
li a4 10
jal ra, draw_line
li a0 217
li a1 214
li a2 202
li a3 177
li a4 10
jal ra, draw_line
li a0 223
li a1 231
li a2 248
li a3 289
li a4 10
jal ra, draw_line
li a0 223
li a1 234
li a2 248
li a3 294
li a4 10
jal ra, draw_line
li a0 222
li a1 236
li a2 249
li a3 299
li a4 10
jal ra, draw_line
li a0 197
li a1 182
li a2 215
li a3 222
li a4 8
jal ra, draw_line
li a0 214
li a1 225
li a2 197
li a3 187
li a4 8
jal ra, draw_line
li a0 221
li a1 241
li a2 247
li a3 302
li a4 8
jal ra, draw_line
li a0 245
li a1 303
li a2 221
li a3 244
li a4 8
jal ra, draw_line
li a0 195
li a1 167
li a2 299
li a3 79
li a4 15
jal ra, draw_line
li a0 317
li a1 69
li a2 394
li a3 152
li a4 15
jal ra, draw_line
li a0 317
li a1 72
li a2 388
li a3 152
li a4 15
jal ra, draw_line
li a0 317
li a1 64
li a2 399
li a3 153
li a4 14
jal ra, draw_line
li a0 317
li a1 71
li a2 391
li a3 153
li a4 15
jal ra, draw_line
li a0 403
li a1 158
li a2 444
li a3 170
li a4 9
jal ra, draw_line
li a0 406
li a1 163
li a2 442
li a3 174
li a4 9
jal ra, draw_line
li a0 402
li a1 156
li a2 443
li a3 168
li a4 9
jal ra, draw_line
li a0 404
li a1 161
li a2 443
li a3 172
li a4 9
jal ra, draw_line
li a0 234
li a1 156
li a2 396
li a3 157
li a4 9
jal ra, draw_line
li a0 239
li a1 161
li a2 393
li a3 162
li a4 9
jal ra, draw_line
li a0 441
li a1 166
li a2 327
li a3 71
li a4 13
jal ra, draw_line
li a0 335
li a1 80
li a2 435
li a3 164
li a4 13
jal ra, draw_line
li a0 438
li a1 164
li a2 330
li a3 73
li a4 13
jal ra, draw_line
li a0 318
li a1 176
li a2 352
li a3 238
li a4 13
jal ra, draw_line
li a0 318
li a1 181
li a2 351
li a3 239
li a4 13
jal ra, draw_line
li a0 360
li a1 252
li a2 389
li a3 304
li a4 13
jal ra, draw_line
li a0 359
li a1 255
li a2 385
li a3 304
li a4 13
jal ra, draw_line
li a0 327
li a1 172
li a2 356
li a3 228
li a4 12
jal ra, draw_line
li a0 324
li a1 173
li a2 355
li a3 231
li a4 12
jal ra, draw_line
li a0 354
li a1 233
li a2 322
li a3 174
li a4 12
jal ra, draw_line
li a0 364
li a1 244
li a2 394
li a3 297
li a4 12
jal ra, draw_line
li a0 363
li a1 247
li a2 393
li a3 300
li a4 12
jal ra, draw_line
li a0 362
li a1 249
li a2 392
li a3 302
li a4 12
jal ra, draw_line
li a0 439
li a1 176
li a2 423
li a3 221
li a4 10
jal ra, draw_line
li a0 423
li a1 224
li a2 441
li a3 177
li a4 10
jal ra, draw_line
li a0 417
li a1 239
li a2 396
li a3 297
li a4 10
jal ra, draw_line
li a0 397
li a1 299
li a2 419
li a3 242
li a4 10
jal ra, draw_line
li a0 442
li a1 181
li a2 424
li a3 228
li a4 10
jal ra, draw_line
li a0 420
li a1 247
li a2 399
li a3 302
li a4 10
jal ra, draw_line
li a0 203
li a1 308
li a2 309
li a3 315
li a4 8
jal ra, draw_line
li a0 314
li a1 318
li a2 200
li a3 310
li a4 8
jal ra, draw_line
li a0 195
li a1 313
li a2 315
li a3 323
li a4 9
jal ra, draw_line
li a0 194
li a1 315
li a2 311
li a3 328
li a4 9
jal ra, draw_line
li a0 310
li a1 177
li a2 281
li a3 232
li a4 15
jal ra, draw_line
li a0 314
li a1 178
li a2 284
li a3 236
li a4 15
jal ra, draw_line
li a0 312
li a1 178
li a2 283
li a3 234
li a4 15
jal ra, draw_line
li a0 272
li a1 247
li a2 250
li a3 290
li a4 15
jal ra, draw_line
li a0 250
li a1 300
li a2 274
li a3 251
li a4 15
jal ra, draw_line
li a0 273
li a1 249
li a2 250
li a3 295
li a4 15
jal ra, draw_line
li a0 257
li a1 291
li a2 250
li a3 302
li a4 14
jal ra, draw_line
li a0 317
li a1 180
li a2 286
li a3 240
li a4 14
jal ra, draw_line
li a0 277
li a1 257
li a2 254
li a3 302
li a4 14
jal ra, draw_line
li a0 257
li a1 303
li a2 278
li a3 260
li a4 14
jal ra, draw_line 
li a0 333
li a1 308
li a2 432
li a3 304
li a4 16
jal ra, draw_line
li a0 332
li a1 312
li a2 423
li a3 304
li a4 16
jal ra, draw_line
li a0 380
li a1 325
li a2 329
li a3 400
li a4 16
jal ra, draw_line
li a0 388
li a1 324
li a2 333
li a3 400
li a4 16
jal ra, draw_line
li a0 386
li a1 325
li a2 332
li a3 401
li a4 16
jal ra, draw_line
li a0 208
li a1 175
li a2 227
li a3 176
li a4 16
jal ra, draw_line
li a0 228
li a1 174
li a2 219
li a3 174
li a4 16
jal ra, draw_line
li a0 224
li a1 172
li a2 227
li a3 172
li a4 16
jal ra, draw_line
li a0 248
li a1 171
li a2 254
li a3 178
li a4 8
jal ra, draw_line
li a0 254
li a1 178
li a2 308
li a3 177
li a4 8
jal ra, draw_line
li a0 330
li a1 177
li a2 383
li a3 176
li a4 8
jal ra, draw_line
li a0 250
li a1 173
li a2 320
li a3 172
li a4 10
jal ra, draw_line
li a0 327
li a1 172
li a2 385
li a3 172
li a4 10
jal ra, draw_line
li a0 332
li a1 175
li a2 384
li a3 175
li a4 10
jal ra, draw_line
li a0 253
li a1 176
li a2 318
li a3 175
li a4 10
jal ra, draw_line
li a0 398
li a1 175
li a2 400
li a3 175
li a4 16
jal ra, draw_line
li a0 409
li a1 171
li a2 428
li a3 172
li a4 16
jal ra, draw_line
li a0 410
li a1 174
li a2 435
li a3 175
li a4 16
jal ra, draw_line
li a0 409
li a1 173
li a2 431
li a3 174
li a4 16
jal ra, draw_line
li a0 325
li a1 69
li a2 441
li a3 164
li a4 13
jal ra, draw_line
li a0 435
li a1 164
li a2 336
li a3 81
li a4 13
jal ra, draw_line
li a0 303
li a1 307
li a2 211
li a3 306
li a4 13
jal ra, draw_line
li a0 305
li a1 310
li a2 241
li a3 306
li a4 13
jal ra, draw_line
li a0 317
li a1 322
li a2 318
li a3 413
li a4 15
jal ra, draw_line
li a0 315
li a1 325
li a2 315
li a3 409
li a4 15
jal ra, draw_line
li a0 313
li a1 327
li a2 314
li a3 408
li a4 15
jal ra, draw_line
li a0 311
li a1 329
li a2 313
li a3 406
li a4 15
jal ra, draw_line
li a0 321
li a1 323
li a2 322
li a3 410
li a4 14
jal ra, draw_line
li a0 325
li a1 326
li a2 325
li a3 407
li a4 14
jal ra, draw_line
li a0 392
li a1 164
li a2 320
li a3 306
li a4 15
jal ra, draw_line
li a0 319
li a1 312
li a2 395
li a3 161
li a4 15
jal ra, draw_line
li a0 323
li a1 316
li a2 399
li a3 161
li a4 14
jal ra, draw_line
li a0 399
li a1 166
li a2 329
li a3 312
li a4 14
jal ra, draw_line
li a0 200
li a1 318
li a2 312
li a3 408
li a4 10
jal ra, draw_line
li a0 197
li a1 318
li a2 315
li a3 412
li a4 10
jal ra, draw_line
li a0 322
li a1 413
li a2 442
li a3 315
li a4 10
jal ra, draw_line
li a0 438
li a1 318
li a2 328
li a3 406
li a4 10
jal ra, draw_line
li a0 327
li a1 314
li a2 436
li a3 306
li a4 8
jal ra, draw_line
li a0 439
li a1 309
li a2 325
li a3 318
li a4 8
jal ra, draw_line
li a0 321
li a1 322
li a2 436
li a3 314
li a4 9
jal ra, draw_line
li a0 326
li a1 326
li a2 423
li a3 317
li a4 9
jal ra, draw_line
li a0 402
li a1 157
li a2 445
li a3 311
li a4 12
jal ra, draw_line
li a0 405
li a1 164
li a2 445
li a3 311
li a4 12
jal ra, draw_line
li a0 400
li a1 159
li a2 441
li a3 309
li a4 11
jal ra, draw_line
li a0 438
li a1 306
li a2 400
li a3 165
li a4 11
jal ra, draw_line
li a0 400
li a1 169
li a2 436
li a3 302
li a4 11
jal ra, draw_line
li a0 254
li a1 325
li a2 310
li a3 402
li a4 13
jal ra, draw_line
li a0 252
li a1 326
li a2 308
li a3 400
li a4 13
jal ra, draw_line
li a0 260
li a1 325
li a2 311
li a3 398
li a4 13
jal ra, draw_line
li a0 258
li a1 326
li a2 310
li a3 399
li a4 13
jal ra, draw_line
li a0 194
li a1 174
li a2 195
li a3 297
li a4 13
jal ra, draw_line
li a0 192
li a1 170
li a2 192
li a3 311
li a4 12
jal ra, draw_line

j end  # jump to end

# Bresenham
# draw_line(int x0, int y0, int x1, int y1, int color)
# x0 -> a0
# y0 -> a1
# x1 -> a2
# y1 -> a3
# color -> a4
draw_line: 

    # v1 = [x0,y0,0,0]
    stv v1 v0 a0 0
    stv v1 v1 a1 1

    # v2 = [x1,y1,0,0]
    stv v2 v0 a2 0
    stv v2 v2 a3 1

    # v3 = v2-v1
    vsub v3 v2 v1

    # abs(v3)
    vabs v3 v3 

    # a5 = dv[0]
    # a6 = dv[1]
    vts a5 v3 0
    vts a6 v3 1

    # t3 = steep = dv[1] > dv[0]
    slt t3 a5 a6  # Set t3 to 1 if a5 < a6, else set t3 to 0

    bne a6 a5 _not_equal_case
    li t3 0

    _not_equal_case:
    ble a6 a5 _not_steep  # branch if dv[1] <= dv[0] 

    # Swap x0 and y0 if necessary
    mv t0 a0 # temp = x0
    mv a0 a1 # x0 = y0
    mv a1 t0 # y0 = temp

    mv t0 a2 # temp = x1
    mv a2 a3 # x1 = y1
    mv a3 t0 # y1 = temp

    _not_steep:
    ble a0 a2 _not_inverted # branch if x0 <= x1

    mv t0 a0 # temp = x0
    mv a0 a2 # x0 = x1
    mv a2 t0 # x1 = temp

    mv t0 a1 # temp = y0
    mv a1 a3 # y0 = y1
    mv a3 t0 # y1 = temp

    _not_inverted:

    # v1 = [x0,y0,0,0]
    stv v1 v0 a0 0
    stv v1 v1 a1 1

    # v2 = [x1,y1,0,0]
    stv v2 v0 a2 0
    stv v2 v2 a3 1

    # v3 = v2-v1
    vsub v3 v2 v1

    # abs(v3)
    vabs v3 v3

    # a5 = dv[0]
    # a6 = dv[1]
    vts a5 v3 0
    vts a6 v3 1

    # Initialize error and ystep
    mv a7 a5 # a7 = err = dv[0]

    # t0 = ystep = 1 or -1
    li t0 -1
    bge a1 a3 _not_descend
    li t0 1

    _not_descend:
    mv t1 a0 # x = x0
    mv t2 a1 # y = y0
    li a1 640 # Display width
    li a3 1

    _draw_loop:
    bgt t1 a2 _draw_line_return # if x > x1 return

        mv t4 t1 # xm = t4 = x
        mv t5 t2 # ym = t5 = y
        beqz t3 _not_steep_loop # if t3 > t1 then target
        mv t4 t2 # xm = t4 = y
        mv t5 t1 # ym = t5 = x
        
        # Store pixel
        _not_steep_loop:
        # Calculate the address for pixel (x, y)
        mul a0 t5 a1 # a0 = address = y * display width
        add a0 a0 t4 # address += x

        sb a4 0(a0) # store pixel color 
        add t1 t1 a3 # x++

        # Update error
        sub a7 a7 a6 # error = error - dv[1]
        bgez a7 _draw_loop

        add t2 t2 t0 # y = y + ystep
        add a7 a7 a5 # error = error + dv[0]
        j _draw_loop

    _draw_line_return:
    jalr zero, ra, 0

end:
nop
nop
nop
nop